!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactRedux={},e.React)}(this,function(e,t){"use strict";var r="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,n=function(e){return e+1},o=function(){return t.useReducer(n,0)[1]},u={get state(){throw Error("Please use <Provider store={...}>")},get dispatch(){throw Error("Please use <Provider store={...}>")},get subscribe(){throw Error("Please use <Provider store={...}>")}},c=function(e,t){return e.dispatch!==t.dispatch||e.subscribe!==t.subscribe?1:0},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return t.createContext(e,r)},s=i();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=Symbol("OWN_KEYS"),l=function(){return{recordUsage:function(e){var t=this.affected.get(this.originalObj);t||(t=new Set,this.affected.set(this.originalObj,t)),t.add(e)},get:function(e,t){return this.recordUsage(t),d(e[t],this.affected,this.proxyCache)},has:function(e,t){return this.recordUsage(t),t in e},ownKeys:function(e){return this.recordUsage(f),Reflect.ownKeys(e)}}},d=function(e,t,r){if(!function(e){try{var t=Object.getPrototypeOf(e);return t===Object.prototype||t===Array.prototype}catch(e){return!1}}(e))return e;var n=r&&r.get(e);return n||((n=l()).proxy=new Proxy(function(e){return Object.isFrozen(e)?Array.isArray(e)?Array.from(e):Object.assign({},e):e}(e),n),n.originalObj=e,r&&r.set(e,n)),n.affected=t,n.proxyCache=r,n.proxy},y=function(e,t){var r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some(function(e,t){return e!==n[t]})},b=function e(t,r,n,o,u){if(t===r)return!1;if("object"!==a(t)||null===t)return!0;if("object"!==a(r)||null===r)return!0;var c=n.get(t);if(!c)return!!u;if(o){var i=o.get(t);if(i&&i.nextObj===r)return i.changed;o.set(t,{nextObj:r})}var s=null,l=!0,d=!1,b=void 0;try{for(var h,p=c[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var v=h.value,g=v===f?y(t,r):e(t[v],r[v],n,o,!1!==u);if("boolean"==typeof g&&(s=g),s)break}}catch(e){d=!0,b=e}finally{try{l||null==p.return||p.return()}finally{if(d)throw b}}return null===s&&(s=!!u),o&&o.set(t,{nextObj:r,changed:s}),s},h=function(e){return"function"==typeof e},p=function(e,t){return e===t};e.Provider=function(e){var r=e.store,n=e.customContext,u=void 0===n?s:n,c=e.children,i=o(),a=r.getState(),f=t.useRef([]);f.current.forEach(function(e){return e(a)});var l=t.useCallback(function(e){return f.current.push(e),e(r.getState()),function(){var t=f.current.indexOf(e);f.current.splice(t,1)}},[r]);return t.useEffect(function(){return r.subscribe(function(){i()})},[r,i]),t.createElement(u.Provider,{value:{state:a,dispatch:r.dispatch,subscribe:l}},c)},e.createCustomContext=i,e.useDispatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.customContext,n=void 0===r?s:r,o=t.useContext(n),u=o.dispatch;return u},e.useSelector=function(e,n,u){var c=u||!h(n)&&n||{},i=c.equalityFn,a=void 0===i?h(n)?n:p:i,f=c.customContext,l=void 0===f?s:f,d=o(),y=t.useContext(l),b=y.state,v=y.subscribe,g=e(b),x=t.useRef(null);return r(function(){x.current={equalityFn:a,selector:e,state:b,selected:g}}),t.useEffect(function(){return v(function(e){try{if(x.current.state===e||x.current.equalityFn(x.current.selected,x.current.selector(e)))return}catch(e){}d()})},[v,d]),g},e.useTrackedState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customContext,u=void 0===n?s:n,c=o(),i=t.useContext(u),a=i.state,f=i.subscribe,l=new WeakMap,y=t.useRef(null);r(function(){y.current={state:a,affected:l,cache:new WeakMap,assumeChangedIfNotAffected:!!e.unstable_forceUpdateForStateChange||!e.unstable_ignoreIntermediateObjectUsage&&null}}),t.useEffect(function(){return f(function(e){y.current.state!==e&&b(y.current.state,e,y.current.affected,y.current.cache,y.current.assumeChangedIfNotAffected)&&c()})},[f,c]);var h=t.useRef(new WeakMap);return d(a,l,h.current)},Object.defineProperty(e,"__esModule",{value:!0})});
